<?xml version="1.0" encoding="UTF-8"?>

<metamorph xmlns="http://www.culturegraph.org/metamorph" version="1">


	<rules>

		<data source="001" name="@id" />

		<data name="id" source="@id"  />

		<data source="_id" name="recordtype">
			<constant value="marc"/>
		</data>

		<entity name="language[]" flushWith="record">
			<data source="0410 .a|041  .a" >
				<blacklist>
					<entry name="und"/>
					<entry name="||"/>
				</blacklist>
				<regexp match="(^...$|^..$|^.$)"  />
			</data>

			<data source="008" >
				<substring start="35" end="38"/>
				<blacklist>
					<entry name="und"/>
					<entry name="||"/>
				</blacklist>

			</data>

		</entity>
		<entity name="origcountry_isn_mv[]" flushWith="record" >
			<data source="008" >
				<substring start="15" end="18"/>
			</data>
			<data source="044*.a" />
		</entity>

		<!-- Classifications -->

		<entity name="classif_912[]" flushWith="record">
			<data source="912*.a" />
		</entity>




			<combine name="@080Feld" value="${080a}${x1}${x2}${x3}" sameEntity="false" reset="false">
				<data source="080*.a" name="080a"/>

				<data source="080*.x" name="x1" >
					<occurrence only="1"/>
				</data>

				<data source="080*.x" name="x2">
					<occurrence only="2"/>
				</data>

				<data source="080*.x" name="x3">
					<occurrence only="3"/>
				</data>
			</combine>




		<entity name="080Feld[]" flushWith="record">
			<data source="@080Feld"/>
		</entity>



	</rules>

</metamorph>
